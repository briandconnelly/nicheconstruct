# Introduction

Cooperative behaviors are common across all branches of the tree of life. Insects divide labor within their colonies, plants and soil bacteria exchange essential nutrients, birds care for others' young, and the trillions of cells in the human body restrain their growth and coordinate to provide vital functions. Each instance of cooperation presents an evolutionary challenge: How can individuals that sacrifice their own well-being to help others avoid subversion by those that do not? Over time, we would expect these *defectors* to rise in abundance at the expense of others, eventually driving cooperators---and perhaps the entire population---to extinction.

Several factors can defer this potential *tragedy of the commons* [@hardin1968tragedy; @hamilton1964geneticalboth; @nowak2006five; @west2007evolutionary]. For example, cooperators must benefit more from the cooperative act than others. This can occur when cooperators are clustered together in spatially-structured populations [@kudzalfick2011high; @fletcher2009simple; @nadell2010emergence] or when cooperators use communication [@darch2012density; @brown2001cooperation] or other cues [@gardner2010greenbeards; @sinervo2006selfrecognition; @veelders2010structural] to cooperate conditionally with kin. Interestingly, cooperation can also be bolstered by genetic linkage with self-benefitting traits [@dandekar2012bacterial; @asfahl2015nonsocial; @foster2004pleiotropy], setting the stage for an "adaptive race" in which cooperators and defectors vie for the first highly-beneficial non-social adaptation [@waite2012adaptation; @morgan2012selection].

Using a model of public goods production, @HANKSHAW recently showed that in spatially-structured populations, cooperators gain a substantial leg up on defectors in an adaptive race when the cooperative behavior increases local population density, thus increasing the likelihood of acquiring beneficial non-social mutations. By hitchhiking along with these adaptations, cooperators can rapidly become more abundant. Nevertheless, this advantage is fleeting. As soon as the opportunities for adaptation are exhausted, cooperators are once again at a disadvantage against defectors. However, cooperation can be maintained indefinitely when frequent periodic environmental changes produce a stream of non-social adaptive opportunities. Although natural organisms typically find themselves in changing environments, cooperators may not be able to rely on the the environment to provide sufficient adaptive opportunities for their long-term survival.

Here, we extend the model presented in @HANKSHAW to explore whether niche construction feedbacks can act as a continual source of adaptive opportunity that allows cooperation to persist. Populations alter their local environment based on the the presence of different non-social adaptations. Frequency-dependent selection on these adaptations creates an eco-evolutionary feedback, which increasingly favors the adaptations present in each population. This has several potential benefits for cooperators. First, because populations of cooperators are larger, they are more likely to gain mutations that enable them to track their changing environment. Similarly, this difference in size means that larger cooperator populations "export" their niche at a higher rate than defectors. Finally, because each population constructs a unique niche, the threat of immigrant defectors may be diminished by maladaptation to a cooperator population's niche.

By their very nature, public goods benefit populations by making their environment more hospitable. For example, bacteria produce extracellular products that find soluble iron [@griffin2004cooperation], digest large proteins [@darch2012density; @diggle2007cooperation], and reduce the risk of predation [@cosson2002pseudomonas], among many others [@west2007social]. While many studies have explored how the environment affects the evolution of cooperative bahviors, relatively few have examined how those behaviors affect the environment and the resulting change in evolutionary trajectories. @lehmann2007evolution demonstrated analytically that when niche construction act benefits future generations, cooperation is favored due to reduced competition among kin. When rate-benefitting and yield-benefitting altruistic acts co-evolve, @vandyken2012origins showed that "reciprocal niche construction", where the feedbacks produced by one act benefitted the other, can lead to increased selection for both traits. While these studies have focused on the niche constructing effects of cooperation, we instead focus our attention here on how niche construction enables cooperators to escape defection by hitchhiking along with non-social traits.

