
# Introduction

Cooperative behaviors are common across all branches of the tree of life.
Insects divide labor within their colonies, plants and soil bacteria exchange essential nutrients, birds care for others' young, and the trillions of cells in the human body coordinate to provide vital functions.
Each instance of cooperation presents an evolutionary challenge: How can individuals that sacrifice their own well-being to help others avoid subversion by those that do not? Over time, we would expect these *defectors* to rise in abundance at the expense of others, eventually driving cooperators---and perhaps the entire population---to extinction.

Several factors can prevent this *tragedy of the commons* [@hamilton1964geneticalboth; @nowak2006five; @west2007evolutionary].
One such factor involves non-random social interaction, in which cooperators benefit more from the cooperative act than defectors.
This can occur when cooperators are clustered together in spatially-structured populations [@kudzalfick2011high; @fletcher2009simple; @nadell2010emergence] or when cooperators use communication [@darch2012density; @brown2001cooperation] or other cues [@gardner2010greenbeards; @sinervo2006selfrecognition; @veelders2010structural] to cooperate conditionally with kin.
Cooperation can also be bolstered by pleiotropic connections to personal benefits [@dandekar2012bacterial; @foster2004pleiotropy] or through association with alleles encoding self-benefitting traits [@asfahl2015nonsocial].
In these cases, the alleles may provide private benefits that are completely independent from the public benefits of cooperation.
In an asexual population of cooperators and defectors, this sets the stage for an "adaptive race" in which both types vie for the first highly beneficial adaptation [@waite2012adaptation; @morgan2012selection].
The tragedy of the commons can be deferred if a cooperator, by chance, wins the adaptive race.

@HANKSHAW recently demonstrated that in spatially-structured populations, the "Hankshaw effect" can give cooperators a substantial leg up on defectors in an adaptive race.
When cooperation increases local population density, the likelihood of acquiring beneficial mutations is also increased.
The cooperative trait can rise in abundance by hitchhiking along with these adaptations.
Nevertheless, this advantage is fleeting.
As soon as the opportunities for adaptation are exhausted, cooperators are once again at a selective disadvantage against equally-adapted defectors that arise via mutation.
However, @HANKSHAW demonstrated that cooperation can be maintained indefinitely when frequent environmental changes produce a steady stream of new adaptive opportunities.
Although organisms typically find themselves in dynamic environments, the nature and frequency of these changes might not ensure long-term cooperator survival.

Importantly, however, organisms do more than simply experience changing environments passively.
Through their activities, their interactions with others, and even their death, organisms constantly modify their environment.
These changes can produce evolutionary feedback loops in which environmental change alters selection, which, in turn, alters the distribution of phenotypes and their corresponding influence on the environment [@odling2003niche].
Because of these feedback loops, populations may find themselves continually chasing beneficial mutations as their adaptive landscape perpetually shifts beneath them.

Here, we explore whether the selective feedbacks that result from niche construction can prolong cooperation.
We build upon the model presented by @HANKSHAW to allow populations to modify their local environments in ways that affect fitness.
We first use this model to address whether niche construction can extend the Hankshaw effect, allowing cooperation to continue to hitchhike as populations continually adapt.
We then focus on how niche construction influences outcomes when isolated cooperator populations encounter populations of defectors, either through migration or through mutations that inevitably produce defectors that share the same adaptations.
Finally, niche construction has frequently been shown to increase diversity [@TODO].
We explore whether this diversity helps or hinders the evolution of cooperation.

We find that niche construction can promote and sustain cooperation indefinitely.
However, the niche construction must have a negative component.
Furthermore, we show that the level of diversity promoted by this negative feedback must be sufficiently low to favor the evolution of cooperation.

