# Introduction

Cooperative behaviors are common across all branches of the tree of life. Insects divide labor within their colonies, plants and soil bacteria exchange essential nutrients, birds care for others' young, and the trillions of cells in the human body restrain their growth and coordinate to provide vital functions. Each instance of cooperation presents an evolutionary challenge: How can individuals that sacrifice their own well-being to help others avoid subversion by those that do not? Over time, we would expect these *defectors* to rise in abundance at the expense of others, eventually driving cooperators---and perhaps the entire population---to extinction.

Several factors can defer this potential *tragedy of the commons* [@hardin1968tragedy; @hamilton1964geneticalboth; @nowak2006five; @west2007evolutionary]. For example, cooperators must benefit more from the cooperative act than others. This can occur when cooperators are clustered together in spatially-structured populations [@kudzalfick2011high; @fletcher2009simple; @nadell2010emergence] or when cooperators use communication [@darch2012density; @brown2001cooperation] or other cues [@gardner2010greenbeards; @sinervo2006selfrecognition; @veelders2010structural] to cooperate conditionally with kin. Interestingly, cooperation can also be bolstered by genetic linkage with self-benefitting traits [@dandekar2012bacterial; @asfahl2015nonsocial; @foster2004pleiotropy], setting the stage for an "adaptive race" in which cooperators and defectors vie for the first highly-beneficial non-social adaptation [@waite2012adaptation; @morgan2012selection].

@HANKSHAW recently showed that in spatially-structured populations, cooperators can gain a substantial leg up on defectors in an adaptive race when the cooperative behavior increases local population density, thus increasing the likelihood of acquiring beneficial non-social mutations. By hitchhiking along with these adaptations, the cooperative trait can rapidly rise in abundance. Nevertheless, this advantage is fleeting. As soon as the opportunities for adaptation are exhausted, cooperators are once again at a disadvantage against defectors, particularly those that arise from within via mutations that disable cooperation. However, @HANKSHAW demonstrated that cooperation can be maintained indefinitely when frequent environmental changes produce a steady stream of non-social adaptive opportunities. Although organisms typically find themselves in dynamic environments, change might not occur at a rate that provides sufficient adaptive opportunities to ensure long-term cooperator survival.

Here, we build upon the model presented in @HANKSHAW to explore whether the selective feedbacks produced as populations modify their environment can act as an additional source of adaptive opportunities. As previously described, this model follows the evolution of cooperation in a metapopulation of populations connected by spatially-limited migration. Cooperators produce a public good that increases the local carrying capacity. Through mutation, individuals gain non-social adaptations that confer fitness benefits. These benefits are large enough so that an adapted cooperator is more fit than a less-adapted defector (note that for simplicity, we refer to all non-cooperators as "defectors", regardless of their origin). Because of their larger sizes, cooperator populations are more likely to acquire these adaptations. However, cooperator populations remain susceptible to invasion by adapted defectors either immigrate from a nearby populaion or arise via social mutation. In our expanded version of this model, populations alter their local environment based on the the presence of different non-social adaptations. Frequency-dependent selection on these adaptations creates an eco-evolutionary feedback that increasingly favors the adaptations present in each population. We focus on two aspects in which the production of public goods is affected by these selective feedbacks. First, the creation of unique niches may diminish the ability of both cooperators and defectors to invade neighboring patches due to maladaptation. However, because cooperator populations are larger, the greater number of emigrants that they produce will allow them to "export" their niche at a higher rate than defectors. As a result, cooperators may be able to expand more quickly. Second, larger cooperator populations will experience more mutations, which better enables these populations to adapt to changing environments. If niche construction produces continual change, can the resulting adaptive opportunities maintain cooperation?


