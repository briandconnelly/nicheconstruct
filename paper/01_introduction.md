# Introduction

Cooperative behaviors are common across all branches of the tree of life.
Insects divide labor within their colonies, plants and soil bacteria exchange essential nutrients, birds care for others' young, and the trillions of cells in the human body restrain their growth and coordinate to provide vital functions.
Each instance of cooperation presents an evolutionary challenge: How can individuals that sacrifice their own well-being to help others avoid subversion by those that do not? Over time, we would expect these *defectors* to rise in abundance at the expense of others, eventually driving cooperators---and perhaps the entire population---to extinction.

Several factors can prevent this *tragedy of the commons* [@hardin1968tragedy; @hamilton1964geneticalboth; @nowak2006five; @west2007evolutionary].
One important factor involves non-random social interaction, in which cooperators benefit more from the cooperative act than defectors.
This can occur when cooperators are clustered together in spatially-structured populations [@kudzalfick2011high; @fletcher2009simple; @nadell2010emergence] or when cooperators use communication [@darch2012density; @brown2001cooperation] or other cues [@gardner2010greenbeards; @sinervo2006selfrecognition; @veelders2010structural] to cooperate conditionally with kin.
Cooperation can also be bolstered by pleiotropic connections to personal benefits [@dandekar2012bacterial; @foster2004pleiotropy] or association with alleles encoding self-benefitting traits [@asfahl2015nonsocial].
In the latter case, the alleles may provide private benefits that are completely independent from the public benefits of cooperation.
In a mixed population of cooperators and defectors, this sets the stage for an "adaptive race" in which both types vie for the first highly beneficial adaptation [@waite2012adaptation; @morgan2012selection].
The tragedy of the commons can be deferred if a cooperator, by chance, wins the adaptive race.

@HANKSHAW recently demonstrated that in spatially-structured populations, cooperators can gain a substantial leg up on defectors in an adaptive race by the "Hankshaw effect".
When cooperation increases local population density, the likelihood of acquiring beneficial mutations is also increased.
By hitchhiking along with these adaptations, the cooperative trait can rapidly rise in abundance.
Nevertheless, this advantage is fleeting.
As soon as the opportunities for adaptation are exhausted, cooperators are once again at a selective disadvantage against adapted defectors.
However, @HANKSHAW demonstrated that cooperation can be maintained indefinitely when frequent environmental changes produce a steady stream of adaptive opportunities.
Although organisms typically find themselves in dynamic environments, the nature and frequency of these changes might not ensure long-term cooperator survival.

Importantly, this environmental influence is not a completely passive process.
Through their activities, their interactions with others, and even through their deaths, organisms constantly modify their environment.
These changes can produce evolutionary feedback loops in which environmental change alters selection, which, in turn, alters the distribution of phenotypes and their corresponding influence on the environment [@odling2003niche].
Because of these feedback loops, populations may find themselves continually chasing beneficial mutations as their adaptive landscape shifts beneath them.

Here, we explore whether the selective feedbacks that arise during niche construction can maintain cooperation indefinitely.
We expand the model presented by @HANKSHAW to allow populations to modify their local environments in ways that affect their fitness.
We first use this model to address whether niche construction can prolong the Hangar effect, allowing cooperation to continue hitchhiking as populations continually adapt.
We then focus on how niche construction influences outcomes when cooperator populations encounter populations of defectors, either through migration or through mutations that inevitably produce defectors that share the same adaptations.
Finally, the niche construction process can increase diversity [@TODO].
We explore whether this diversity helps or hinders cooperation.

