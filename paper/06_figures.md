\clearpage

# Figures

## Figure 1 {#fig1}

![**Adaptation, Hitchhiking, and the Evolution of Cooperation.** The proportion of cooperators present in the population is shown for the duration of simulations. Curves show the average among replicate populations, and shaded areas indicate 95% confidence intervals. Unless otherwise noted, parameter values are listed in [Table 1](#tables). (**A**) Without any opportunity to adapt ($L$, the number of adaptive loci, is zero), cooperation is quickly lost. (**B**) When adaptation can occur ($L=5$), but populations do not alter their environment ($\epsilon$, the intensity of niche construction, is zero), cooperation hitchhikes along with adaptions, allowing cooperators to temporarily rise in abundance before eventually going extinct.](../figures/Figure1.png)

\clearpage


## Figure 2 {#fig2}

![**Niche Construction and the Evolution of Cooperation.** The proportion of cooperators present in the population is shown for the duration of simulations. Curves show the average among replicate populations, and shaded areas indicate 95% confidence intervals. (**A**) Niche construction enables cooperation to be maintained indefinitely. In the majority of populations (13/18), cooperation remained the dominant strategy. (**B**) When niche construction is removed and the fitness benefit of adaptation is increased as compensation ($\epsilon=0$, $\delta=0.6$), adapted defectors arise and drive cooperators to extinction. (**C**) Without negative niche construction, cooperation is not maintained ($A=5$). Here again, cooperators are at a selective disadvantage against equally-adapted defectors that arise via mutation.](../figures/Figure2.png)

\clearpage


## Figure 3 {#fig3}

![**Niche Construction and Invasion.** Curves trace the proportion of cooperators present in the population for the duration of 160 replicate simulations ($T=1000$). These experiments examine whether a rare cooperator or defector strategy can invade when initiated at a single population in the center of the metapopulation lattice ($N^{2}=121$). Unless otherwise noted, mutations ($\mu_{a}=0, \mu_{c}=0$) are disabled in these ecological simulations to focus on the dynamics of invasion. This limitation is removed in the results shown in Figure SX. (**A**) When cooperators and defectors are matched (i.e., genotypes [1,2,3,4,5]) and adaptation cannot occur, rare defectors quickly invade and drive cooperators to extinction due to the cost of cooperation. Defectors were stochastically eliminated in 2 replicate populations. (**B**)
However, the adaptive opportunities produced by negative niche construction can allow cooperators to resist invasion by initially-matching defectors. Here, cooperation persisted in the majority of populations ($\mu_{a}=0.00005$, the base mutation rate). (**C**) Here we demonstrate that these adaptations can enable an adapted cooperator (genotype [1,2,3,4,*6*]) to displace a population of defectors when defectors cannot arise or adapt via mutation.](../figures/Figure3.png)


## Figure 4 {#fig4}

TODO: snapshots of cooperators adapting to thwart defector invasion

## Figure 5 {#fig5}

TODO: A: defector invading diverse C population, B: Adapted cooperators cannot spread to resist defector invasion.
